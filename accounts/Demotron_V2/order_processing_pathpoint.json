{
    "pathpointVersion": "1.5.9",
    "kpis": [
        {
            "type": 101,
            "name": "ORDERS",
            "shortName": "ORD.",
            "link": "https://onenr.io/0bEjOMel9w6",
            "query": "SELECT count(*) as value FROM Transaction where appName = 'Order-Processing' where name = 'Controller/Sinatra//purchase' and http.statusCode = 200 COMPARE WITH 1 week ago",
            "value_type": "FLOAT",
            "prefix": "",
            "suffix": "",
            "check": true
        },
        {
            "type": 101,
            "name": "ORDER ERRORS",
            "shortName": "ORD. ERR.",
            "link": "https://onenr.io/08dQeeBrVQe",
            "query": "SELECT count(*) as value FROM Transaction WHERE appName = 'Order-Processing' and httpResponseCode != '200' COMPARE WITH 1 week ago",
            "value_type": "FLOAT",
            "prefix": "",
            "suffix": "",
            "check": true
        },
        {
            "type": 101,
            "name": "DELIVERED",
            "shortName": "DELIVERED",
            "link": "https://onenr.io/0x0jlgGN7RW",
            "query": "SELECT count(*) as value FROM Transaction where appName = 'Delivery' where name = 'Controller/Sinatra//deliver' and http.statusCode = 200 COMPARE WITH 1 week ago",
            "value_type": "FLOAT",
            "prefix": "",
            "suffix": "",
            "check": true
        },
        {
            "type": 101,
            "name": "RETURNED",
            "shortName": "RETURNS",
            "link": "https://onenr.io/0x0jlgGN7RW",
            "query": "SELECT count(*) as value FROM Transaction where appName = 'Order-Processing' where name = 'Controller/Sinatra//return_purchase' and http.statusCode = 200 COMPARE WITH 1 week ago",
            "value_type": "FLOAT",
            "prefix": "",
            "suffix": "",
            "check": true
        }
    ],
    "stages": [
        {
            "title": "Login",
            "active_dotted": "none",
            "arrowMode": "FLOW",
            "percentage_above_avg": 20,
            "steps": [
                {
                    "line": 1,
                    "values": [
                        {
                            "title": "LOGIN",
                            "id": "ST0-LINE1-SS1"
                        }
                    ]
                }
            ],
            "touchpoints": [
                {
                    "title": "Login Service Throughput",
                    "status_on_off": true,
                    "dashboard_url": [
                        "https://onenr.io/0EPwJb28Bw7"
                    ],
                    "related_steps": "ST0-LINE1-SS1",
                    "queries": [
                        {
                            "type": "PRC-COUNT-QUERY",
                            "accountID": 1606862,
                            "query": "SELECT count(*) as session FROM Transaction WHERE appName = 'Login Service' and name = 'WebTransaction/Go/POST /login' AND http.statusCode = 200",
                            "min_count": 40
                        }
                    ]
                },
                {
                    "title": "Login Performance",
                    "status_on_off": true,
                    "dashboard_url": [
                        "https://onenr.io/0EPwJb28Bw7"
                    ],
                    "related_steps": "ST0-LINE1-SS1",
                    "queries": [
                        {
                            "type": "APP-HEALTH-QUERY",
                            "accountID": 1606862,
                            "query": "SELECT filter(apdex(duration, t:0.5), WHERE 1=1) as apdex, filter( max(duration), WHERE request.method = 'POST') as response,filter(percentage(count(*), WHERE error is true), WHERE request.method = 'POST') as error from Transaction WHERE appName = 'Login Service' and name = 'WebTransaction/Go/POST /login' AND http.statusCode = 200",
                            "min_apdex": 0.9,
                            "max_response_time": 0.2,
                            "max_error_percentage": 1
                        }
                    ]
                }
            ]
        },
        {
            "title": "ORDER",
            "active_dotted": "none",
            "arrowMode": "FLOW",
            "percentage_above_avg": 20,
            "steps": [
                {
                    "line": 1,
                    "values": [
                        {
                            "title": "Order Proc",
                            "id": "ST1-LINE1-SS1"
                        }
                    ]
                },
                {
                    "line": 2,
                    "values": [
                        {
                            "title": "Billing",
                            "id": "ST1-LINE2-SS1"
                        }
                    ]
                },
                {
                    "line": 3,
                    "values": [
                        {
                            "title": "Add to Cart",
                            "id": "ST1-LINE3-SS1"
                        }
                    ]
                }
            ],
            "touchpoints": [
                {
                    "title": "Order Processing Throughput",
                    "status_on_off": true,
                    "dashboard_url": [
                        "https://onenr.io/0EPwJb28Bw7"
                    ],
                    "related_steps": "ST1-LINE1-SS1",
                    "queries": [
                        {
                            "type": "PCC-COUNT-QUERY",
                            "accountID": 1606862,
                            "query": "SELECT count(*)  FROM Transaction where appName = 'Order-Processing' where name = 'Controller/Sinatra//purchase' and http.statusCode = 200",
                            "min_count": 80
                        }
                    ]
                },
                {
                    "title": "Order Composer & Processing Health",
                    "status_on_off": true,
                    "dashboard_url": [
                        "https://onenr.io/0EPwJb28Bw7"
                    ],
                    "related_steps": "ST1-LINE1-SS1",
                    "queries": [
                        {
                            "type": "APP-HEALTH-QUERY",
                            "accountID": 1606862,
                            "query": "SELECT filter(apdex(duration, t:1), WHERE 1=1) as apdex, filter( max(duration), WHERE request.method = 'POST') as response,filter(percentage(count(*), WHERE error is true), WHERE request.method = 'POST') as error from Transaction WHERE appName like 'Order-Composer' or appName like 'Order-Processing'",
                            "min_apdex": 0.6,
                            "max_response_time": 2.25,
                            "max_error_percentage": 1
                        }
                    ]
                }
            ]
        },
        {
            "title": "PACKAGE",
            "active_dotted": "none",
            "arrowMode": "STATIC",
            "percentage_above_avg": 20,
            "steps": [
                {
                    "line": 1,
                    "values": [
                        {
                            "title": "Packing & Assembly",
                            "id": "ST2-LINE1-SS1"
                        },
                        {
                            "title": "Boxing",
                            "id": "ST2-LINE1-SS2"
                        },
                        {
                            "title": "Wrapping",
                            "id": "ST2-LINE1-SS3"
                        }
                    ]
                },
                {
                    "line": 2,
                    "values": [
                        {
                            "title": "Packaging Service",
                            "id": "ST2-LINE2-SS1"
                        }
                    ]
                }
            ],
            "touchpoints": [
                {
                    "title": "Order Packaging Throughput",
                    "status_on_off": true,
                    "dashboard_url": [
                        "https://onenr.io/0EPwJb28Bw7"
                    ],
                    "related_steps": "ST2-LINE2-SS1",
                    "queries": [
                        {
                            "type": "PCC-COUNT-QUERY",
                            "accountID": 1606862,
                            "query": "SELECT count(*) FROM Transaction where appName = 'Order-Packaging' where name = 'Controller/Sinatra//package_order' and http.statusCode = 200",
                            "min_count": 75
                        }
                    ]
                },
                {
                    "title": "Order Packaging Health",
                    "status_on_off": true,
                    "dashboard_url": [
                        "https://onenr.io/0EPwJb28Bw7"
                    ],
                    "related_steps": "ST2-LINE2-SS1",
                    "queries": [
                        {
                            "type": "APP-HEALTH-QUERY",
                            "accountID": 1606862,
                            "query": "SELECT filter(apdex(duration, t:0.028), WHERE 1=1) as apdex, filter( max(duration), WHERE 1=1) as response,filter(percentage(count(*), WHERE error is true), WHERE 1=1) as error from Transaction WHERE appName='Order-Packaging'",
                            "min_apdex": 0.65,
                            "max_response_time": 0.3,
                            "max_error_percentage": 1
                        }
                    ]
                }
            ]
        },
        {
            "title": "SHIP",
            "active_dotted": "none",
            "arrowMode": "STATIC",
            "percentage_above_avg": 20,
            "steps": [
                {
                    "line": 1,
                    "values": [
                        {
                            "title": "Labeling",
                            "id": "ST3-LINE1-SS1"
                        }
                    ]
                },
                {
                    "line": 2,
                    "values": [
                        {
                            "title": "Shipping",
                            "id": "ST3-LINE2-SS1"
                        },
                        {
                            "title": "Delivery",
                            "id": "ST3-LINE2-SS2"
                        }
                    ]
                }
            ],
            "touchpoints": [
                {
                    "title": "Orders Delivered (throughput)",
                    "status_on_off": true,
                    "dashboard_url": [
                        "https://onenr.io/0EPwJb28Bw7"
                    ],
                    "related_steps": "ST3-LINE2-SS2",
                    "queries": [
                        {
                            "type": "PCC-COUNT-QUERY",
                            "accountID": 1606862,
                            "query": "SELECT count(*) from Transaction WHERE appName = 'Delivery' and name = 'Controller/Sinatra//deliver' and errorMessage is NULL",
                            "min_count": 50
                        }
                    ]
                },
                {
                    "title": "Delivery Service Health",
                    "status_on_off": true,
                    "dashboard_url": [
                        "https://onenr.io/0EPwJb28Bw7"
                    ],
                    "related_steps": "ST3-LINE2-SS2",
                    "queries": [
                        {
                            "type": "APP-HEALTH-QUERY",
                            "accountID": 1606862,
                            "query": "SELECT filter(apdex(duration, t:0.5), WHERE 1=1) as apdex, filter( max(duration), WHERE 1=1) as response,filter(percentage(count(*), WHERE error is true), WHERE 1=1) as error from Transaction WHERE appName='Delivery' and name = 'Controller/Sinatra//deliver'",
                            "min_apdex": 0.7,
                            "max_response_time": 1,
                            "max_error_percentage": 2
                        }
                    ]
                }
            ]
        },
        {
            "title": "NOTIFY",
            "active_dotted": "none",
            "arrowMode": "FLOW",
            "percentage_above_avg": 20,
            "steps": [
                {
                    "line": 1,
                    "values": [
                        {
                            "title": "Email",
                            "id": "ST4-LINE1-SS1"
                        },
                        {
                            "title": "SMS",
                            "id": "ST4-LINE1-SS2"
                        }
                    ]
                }
            ],
            "touchpoints": [
                {
                    "title": "Email Throughput",
                    "status_on_off": true,
                    "dashboard_url": [
                        "https://onenr.io/0EPwJb28Bw7"
                    ],
                    "related_steps": "ST4-LINE1-SS1",
                    "queries": [
                        {
                            "type": "PCC-COUNT-QUERY",
                            "accountID": 1606862,
                            "query": "SELECT count(*) from Transaction WHERE appName = 'Email-Notification' and name = 'Controller/Sinatra//send_email' and errorMessage is NULL",
                            "min_count": 50
                        }
                    ]
                },
                {
                    "title": "SMS Throughput",
                    "status_on_off": true,
                    "dashboard_url": [
                        "https://onenr.io/0EPwJb28Bw7"
                    ],
                    "related_steps": "ST4-LINE1-SS2",
                    "queries": [
                        {
                            "type": "PCC-COUNT-QUERY",
                            "accountID": 1606862,
                            "query": "SELECT count(*) from Transaction WHERE appName = 'Sms-Notification' and name = 'Controller/Sinatra//send_sms' and errorMessage is NULL",
                            "min_count": 50
                        }
                        
                    ]
                }
            ]
        },
        {
            "title": "RETURN",
            "active_dotted": "none",
            "arrowMode": "FLOW",
            "percentage_above_avg": 20,
            "steps": [
                {
                    "line": 1,
                    "values": [
                        {
                            "title": "RETURN",
                            "id": "ST5-LINE1-SS1"
                        }
                    ]
                }
            ],
            "touchpoints": [
                {
                    "title": "Return Throughput",
                    "status_on_off": true,
                    "dashboard_url": [
                        "https://onenr.io/0EPwJb28Bw7"
                    ],
                    "related_steps": "ST5-LINE1-SS1",
                    "queries": [
                        {
                            "type": "PCC-COUNT-QUERY",
                            "accountID": 1606862,
                            "query": "SELECT count(*) FROM Transaction where appName = 'Order-Processing' where name = 'Controller/Sinatra//return_purchase' and http.statusCode = 200",
                            "max_count": 15,
                            "min_count": 1
                        }
                    ]
                },
                {
                    "title": "Return Performance",
                    "status_on_off": true,
                    "dashboard_url": [
                        "https://onenr.io/0EPwJb28Bw7"
                    ],
                    "related_steps": "ST5-LINE1-SS1",
                    "queries": [
                        {
                            "type": "APP-HEALTH-QUERY",
                            "accountID": 1606862,
                            "query": "SELECT filter(apdex(duration, t:0.5), WHERE 1=1) as apdex, filter( max(duration), WHERE request.method = 'POST') as response,filter(percentage(count(*), WHERE error is true), WHERE request.method = 'POST') as error from Transaction WHERE appName = 'Order-Processing' where name = 'Controller/Sinatra//return_purchase' and http.statusCode = 200",
                            "min_apdex": 0.9,
                            "max_response_time": 0.6,
                            "max_error_percentage": 1
                        }
                    ]
                }
            ]
        }

    ]
}