{
    "pathpointVersion": "1.5.9",
    "kpis": [
        {
            "type": 101,
            "name": "Orders Processed",
            "shortName": "ORDER_PROC",
            "link": "https://onenr.io/0kERzGBdEjr",
            "query": "SELECT count(*) as  value  FROM Transaction WHERE appName = 'Order-Processing' and httpResponseCode = '200' and request.method = 'POST' COMPARE WITH 2 day ago",
            "value_type": "FLOAT",
            "prefix": "",
            "suffix": "",
            "check": true
        },
        {
            "type": 101,
            "name": "Orders Proessed",
            "shortName": "ORDER_PROC_ERR",
            "link": "https://onenr.io/0GbRmlPBzwy",
            "query": "SELECT count(*) as value  FROM  Transaction WHERE appName = 'Order-Processing' and httpResponseCode = '200' and request.method = 'POST' COMPARE WITH 2 day ago",
            "value_type": "FLOAT",
            "prefix": "",
            "suffix": "",
            "check": true
        },
        {
            "type": 101,
            "name": "Orders Shipped",
            "shortName": "ORDER_SHIP",
            "link": "https://onenr.io/01qwL8KPxw5",
            "query": "SELECT count(*) as value  FROM  Transaction WHERE appName = 'Shipping Service' AND errorMessage is NULL COMPARE WITH 2 day ago",
            "value_type": "FLOAT",
            "prefix": "",
            "suffix": "",
            "check": true
        }
    ],
    "stages": [
        {
            "title": "ORDER MGMT.",
            "active_dotted": "none",
            "arrowMode": "FLOW",
            "percentage_above_avg": 20,
            "steps": [
                {
                    "line": 1,
                    "values": [
                        {
                            "title": "Web",
                            "id": "ST1-LINE1-SS1"
                        },
                        {
                            "title": "Mobile Web",
                            "id": "ST1-LINE1-SS2"
                        },
                        {
                            "title": "App",
                            "id": "ST1-LINE1-SS3"
                        }
                    ]
                },
                {
                    "line": 2,
                    "values": [
                        {
                            "title": "Login",
                            "id": "ST1-LINE2-SS1"
                        },
                        {
                            "title": "Signup",
                            "id": "ST1-LINE2-SS2"
                        },
                        {
                            "title": "Billing",
                            "id": "ST1-LINE2-SS3"
                        }
                    ]
                },
                {
                    "line": 3,
                    "values": [
                        {
                            "title": "Add to Cart",
                            "id": "ST1-LINE3-SS1"
                        }
                    ]
                },
                {
                    "line": 4,
                    "values": [
                        {
                            "title": "K8s",
                            "id": "ST1-LINE4-SS1"
                        }
                    ]
                }
            ],
            "touchpoints": [
                {
                    "title": "Login People",
                    "status_on_off": true,
                    "dashboard_url": [
                        "https://onenr.io/01qwL8KPxw5"
                    ],
                    "related_steps": "ST1-LINE2-SS1",
                    "queries": [
                        {
                            "type": "PRC-COUNT-QUERY",
                            "accountID": 1606862,
                            "query": "SELECT count(*) as session FROM Public_APICall WHERE awsRegion='queue'",
                            "min_count": 10
                        }
                    ]
                },
                {
                    "title": "App Backend Health",
                    "status_on_off": true,
                    "dashboard_url": [
                        "https://onenr.io/01qwL8KPxw5"
                    ],
                    "related_steps": "ST1-LINE1-SS3",
                    "queries": [
                        {
                            "type": "APP-HEALTH-QUERY",
                            "accountID": 1606862,
                            "query": "SELECT filter(apdex(duration, t:0.028), WHERE 1=1) as apdex, filter( max(duration), WHERE 1=1) as response,filter(percentage(count(*), WHERE error is true), WHERE 1=1) as error from Transaction WHERE appName='QS'",
                            "min_apdex": 0.4,
                            "max_response_time": 0.5,
                            "max_error_percentage": 5
                        }
                    ]
                },
                {
                    "title": "App Frontend Health",
                    "status_on_off": true,
                    "dashboard_url": [
                        "https://onenr.io/01qwL8KPxw5"
                    ],
                    "related_steps": "ST1-LINE1-SS1",
                    "queries": [
                        {
                            "type": "FRT-HEALTH-QUERY",
                            "accountID": 1606862,
                            "query": "SELECT filter(apdex(duration, t:1), WHERE 1=1) as apdex, filter( max(duration), WHERE 1=1) as response,filter(percentage(count(*), WHERE error is true), WHERE 1=1) as error from PageView WHERE appName='QS'",
                            "min_apdex": 0.6,
                            "max_response_time": 1.2,
                            "max_error_percentage": 5
                        }
                    ]
                },
                {
                    "title": "Login Check",
                    "status_on_off": true,
                    "dashboard_url": [
                        "https://onenr.io/01qwL8KPxw5"
                    ],
                    "related_steps": "ST1-LINE2-SS1",
                    "queries": [
                        {
                            "type": "SYN-CHECK-QUERY",
                            "accountID": 1606862,
                            "query": "SELECT filter(percentage(count(result),WHERE result='SUCCESS'),WHERE 1=1) as success, max(duration) as duration, max(longRunningTasksAvgTime) as request from SyntheticCheck,SyntheticRequest WHERE monitorName='BDB Live person'",
                            "max_avg_response_time": 0.7,
                            "max_total_check_time": 1.25,
                            "min_success_percentage": 98
                        }
                    ]
                },
                {
                    "title": "Signup People",
                    "status_on_off": true,
                    "dashboard_url": [
                        "https://onenr.io/01qwL8KPxw5"
                    ],
                    "related_steps": "ST1-LINE2-SS2",
                    "queries": [
                        {
                            "type": "PRC-COUNT-QUERY",
                            "accountID": 1606862,
                            "query": "SELECT count(*) as session FROM Public_APICall WHERE awsRegion='us-east-1'",
                            "min_count": 36
                        }
                    ]
                },
                {
                    "title": "Order Composer Pod Wait",
                    "status_on_off": true,
                    "dashboard_url": [
                        "https://onenr.io/01qwL8KPxw5"
                    ],
                    "related_steps": "ST1-LINE4-SS1",
                    "queries": [
                        {
                            "type": "PRC-COUNT-QUERY",
                            "accountID": 1606862,
                            "query": "FROM K8sContainerSample select uniqueCount(podName) where status = 'Waiting' and podName like 'order-composer-%'",
                            "max_count": 5
                        }
                    ]
                }

            ]
        },
        {
            "title": "PACKAGING",
            "active_dotted": "none",
            "arrowMode": "STATIC",
            "percentage_above_avg": 20,
            "steps": [
                {
                    "line": 1,
                    "values": [
                        {
                            "title": "Packing & Assembly",
                            "id": "ST2-LINE1-SS1"
                        },
                        {
                            "title": "Boxing",
                            "id": "ST2-LINE1-SS2"
                        },
                        {
                            "title": "Wrapping",
                            "id": "ST2-LINE1-SS3"
                        }
                    ]
                },
                {
                    "line": 2,
                    "values": [
                        {
                            "title": "Inventory Service",
                            "id": "ST2-LINE2-SS1"
                        }
                    ]
                },
                {
                    "line": 3,
                    "values": [
                        {
                            "title": "K8s",
                            "id": "ST2-LINE3-SS1"
                        }
                    ]
                }
            ],
            "touchpoints": [
                {
                    "title": "Inventory Service Throughput",
                    "status_on_off": true,
                    "dashboard_url": [
                        "https://onenr.io/01qwL8KPxw5"
                    ],
                    "related_steps": "ST2-LINE2-SS1",
                    "queries": [
                        {
                            "type": "PCC-COUNT-QUERY",
                            "accountID": 1606862,
                            "query": "SELECT count(*) FROM Public_APICall WHERE awsRegion='us-east-1'",
                            "min_count": 20
                        }
                    ]
                },
                {
                    "title": "Inventory Service Health",
                    "status_on_off": true,
                    "dashboard_url": [
                        "https://onenr.io/01qwL8KPxw5"
                    ],
                    "related_steps": "ST2-LINE2-SS1",
                    "queries": [
                        {
                            "type": "APP-HEALTH-QUERY",
                            "accountID": 1606862,
                            "query": "SELECT filter(apdex(duration, t:0.028), WHERE 1=1) as apdex, filter( max(duration), WHERE 1=1) as response,filter(percentage(count(*), WHERE error is true), WHERE 1=1) as error from Transaction WHERE appName='QS'",
                            "min_apdex": 0.4,
                            "max_response_time": 0.5,
                            "max_error_percentage": 5
                        }
                    ]
                },
                {
                    "title": "Inventory Pod Wait",
                    "status_on_off": true,
                    "dashboard_url": [
                        "https://onenr.io/01qwL8KPxw5"
                    ],
                    "related_steps": "ST2-LINE3-SS1",
                    "queries": [
                        {
                            "type": "PRC-COUNT-QUERY",
                            "accountID": 1606862,
                            "query": "FROM K8sContainerSample select uniqueCount(podName) where status = 'Waiting' and podName like  'inventory%'",
                            "max_count": 5
                        }
                    ]
                }
            ]
        },
        {
            "title": "SHIPPING",
            "active_dotted": "none",
            "arrowMode": "STATIC",
            "percentage_above_avg": 20,
            "steps": [
                {
                    "line": 1,
                    "values": [
                        {
                            "title": "Labeling",
                            "id": "ST3-LINE1-SS1"
                        }
                    ]
                },
                {
                    "line": 2,
                    "values": [
                        {
                            "title": "Shipping",
                            "id": "ST3-LINE2-SS1"
                        },
                        {
                            "title": "Delivery",
                            "id": "ST3-LINE2-SS2"
                        }
                    ]
                },
                {
                    "line": 3,
                    "values": [
                        {
                            "title": "K8s",
                            "id": "ST3-LINE3-SS1"
                        }
                    ]
                }
            ],
            "touchpoints": [
                {
                    "title": "Shipping Service Throughput",
                    "status_on_off": true,
                    "dashboard_url": [
                        "https://onenr.io/01qwL8KPxw5"
                    ],
                    "related_steps": "ST3-LINE1-SS1",
                    "queries": [
                        {
                            "type": "PCC-COUNT-QUERY",
                            "accountID": 1606862,
                            "query": "SELECT count(*) from Transaction WHERE appName='QS' AND name='WebTransaction/Action/login'",
                            "min_count": 36
                        }
                    ]
                },
                {
                    "title": "Shipping Service Health",
                    "status_on_off": true,
                    "dashboard_url": [
                        "https://onenr.io/01qwL8KPxw5"
                    ],
                    "related_steps": "ST3-LINE2-SS2",
                    "queries": [
                        {
                            "type": "SYN-CHECK-QUERY",
                            "accountID": 1606862,
                            "query": "SELECT filter(percentage(count(result),WHERE result='SUCCESS'),WHERE 1=1) as success, max(duration) as duration, max(longRunningTasksAvgTime) as request from SyntheticCheck,SyntheticRequest WHERE monitorName='BDB Live person'",
                            "max_avg_response_time": 0.7,
                            "max_total_check_time": 1.25,
                            "min_success_percentage": 98
                        }
                    ]
                },
                {
                    "title": "Shipping Pod Wait",
                    "status_on_off": true,
                    "dashboard_url": [
                        "https://onenr.io/01qwL8KPxw5"
                    ],
                    "related_steps": "ST3-LINE3-SS1",
                    "queries": [
                        {
                            "type": "PRC-COUNT-QUERY",
                            "accountID": 1606862,
                            "query": "FROM K8sContainerSample select uniqueCount(podName) where status = 'Waiting' and podName like  'shipping%'",
                            "max_count": 5
                        }
                    ]
                }
            ]
        },
        {
            "title": "NOTIFICATION",
            "active_dotted": "none",
            "arrowMode": "FLOW",
            "percentage_above_avg": 20,
            "steps": [
                {
                    "line": 1,
                    "values": [
                        {
                            "title": "Email",
                            "id": "ST4-LINE1-SS1"
                        },
                        {
                            "title": "SMS",
                            "id": "ST4-LINE1-SS2"
                        },
                        {
                            "title": "In App",
                            "id": "ST4-LINE1-SS3"
                        }
                    ]
                },
                {
                    "line": 2,
                    "values": [
                        {
                            "title": "K8s",
                            "id": "ST4-LINE2-SS1"
                        }
                    ]
                }
            ],
            "touchpoints": [
                {
                    "title": "Email Service Throughput",
                    "status_on_off": true,
                    "dashboard_url": [
                        "https://onenr.io/01qwL8KPxw5"
                    ],
                    "related_steps": "ST4-LINE1-SS1",
                    "queries": [
                        {
                            "type": "PRC-COUNT-QUERY",
                            "accountID": 1606862,
                            "query": "SELECT count(*) as session FROM Public_APICall WHERE awsRegion='ap-southeast-2'",
                            "min_count": 10
                        }
                    ]
                },
                {
                    "title": "Notification Service Health",
                    "status_on_off": true,
                    "dashboard_url": [
                        "https://onenr.io/01qwL8KPxw5"
                    ],
                    "related_steps": "ST4-LINE1-SS2",
                    "queries": [
                        {
                            "type": "APP-HEALTH-QUERY",
                            "accountID": 1606862,
                            "query": "SELECT filter(apdex(duration, t:0.028), WHERE 1=1) as apdex, filter( max(duration), WHERE 1=1) as response,filter(percentage(count(*), WHERE error is true), WHERE 1=1) as error from Transaction WHERE appName='QS'",
                            "min_apdex": 0.4,
                            "max_response_time": 0.5,
                            "max_error_percentage": 5
                        }
                    ]
                },
                {
                    "title": "In App Notification Health",
                    "status_on_off": true,
                    "dashboard_url": [
                        "https://onenr.io/01qwL8KPxw5"
                    ],
                    "related_steps": "ST4-LINE1-SS3",
                    "queries": [
                        {
                            "type": "FRT-HEALTH-QUERY",
                            "accountID": 1606862,
                            "query": "SELECT filter(apdex(duration, t:1), WHERE 1=1) as apdex, filter( max(duration), WHERE 1=1) as response,filter(percentage(count(*), WHERE error is true), WHERE 1=1) as error from PageView WHERE appName='QS'",
                            "min_apdex": 0.6,
                            "max_response_time": 1.2,
                            "max_error_percentage": 5
                        }
                    ]
                },
                {
                    "title": "Notification Pod Wait",
                    "status_on_off": true,
                    "dashboard_url": [
                        "https://onenr.io/01qwL8KPxw5"
                    ],
                    "related_steps": "ST4-LINE2-SS1",
                    "queries": [
                        {
                            "type": "PRC-COUNT-QUERY",
                            "accountID": 1606862,
                            "query": "FROM K8sContainerSample select uniqueCount(podName) where status = 'Waiting' and podName like  '%-notification-%'",
                            "max_count": 5
                        }
                    ]
                }
            ]
        }
    ]
}